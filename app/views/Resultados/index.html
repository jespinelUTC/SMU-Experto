#{extends 'main.html' /}

<script>
$().ready(function(){
$('.imprimir').click(function(){
    window.print();
    return false;
});



});
</script>
<style type="text/css" media="print">
.impresion{
display: none !important;
}

.separacion{
display: none !important;
}
.navbar{
display: none !important;
}
.valoracion{
display: none !important;
}

.muybueno{
background-color: #5DFF7B;
padding-bottom: 8px;
padding-right: 5px;
padding-left: 5px;
padding-top: 8px;

}

.box{
padding-top: 0px;
padding-bottom: 0px;
}

</style>


<style type="text/css" media="screen">
.logo-sistema{
display: none !important;
}
.muybueno{
background-color: #5DFF7B;
padding-bottom: 8px;
padding-right: 5px;
padding-left: 5px;
padding-top: 8px;

}

.bueno{
background-color: #E8CE46;
padding-bottom: 8px;
padding-right: 5px;
padding-left: 5px;
padding-top: 8px;
}
.malo{
background-color: #FF4732;
padding-bottom: 8px;
padding-right: 5px;
padding-left: 5px;
padding-top: 8px;
}
</style>

<div class="container">


		<div class="row">
		<div class="box">
		
			<div class="col-lg-12 text-center" >
				<center><img  class="img-responsive logo-sistema" src="@{'/public/images/logo.png'}"></center>
				<h1>Reporte de la Evaluación</h1>
				<p class="text-justify">A continuación se muestran los resultados obtenidos en la Evaluacíon
				Heurística realizada a <b>${evaluacion.dato.nombreSitio}.</b><span class="valoracion"> Para mayor facilidad se emplean los siguientes colores
				para reflejar el resultado alcanzado en cada uno de los parámetros evaluados:</span></p>
				
				<div class="row">
					<div class="col-lg-4 text-center" >
	
					</div>
				
				<div class="col-lg-4 text-center valoracion" >
					<span class="muybueno"> &nbsp; <b>Muy Bueno &nbsp;</span>&nbsp;
					<span class="bueno"> &nbsp; &nbsp; Bueno &nbsp; &nbsp; </span>&nbsp;
					<span class="malo"> &nbsp; &nbsp; &nbsp; Malo &nbsp; &nbsp; &nbsp; </b> </span>
				</div>
				
				<div class="col-lg-4 text-center" >
					
				</div>	
			</div>		
	</div>
	</div>
	<div class="row">
		<div class="box">
			<div class="col-lg-3" >
			</div>
			<div class="col-lg-6" >
				<center><h3>DATOS DEL ANÁLISIS</h3></center>
				<div class="table-responsive">
					<table class="table table-striped table-hover table-bordered">
						<tr>
							<td class="text-right">
								<b>Nombre del Sitio:</b>
							</td>
							<td>
								<b><h5>${evaluacion.dato.nombreSitio}</h5></b>
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Fecha de Evaluación:</b>
							</td>
							<td>
								${evaluacion.fecha}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Nombre del Evaluador:</b>
							</td>
							<td>
								${evaluacion.usuario.nombre} ${evaluacion.usuario.apellido}
							</td>
						</tr>
						
						<tr>
							<td class="text-right">
								<b>Correo del Evaluador:</b>
							</td>
							<td>
								${evaluacion.usuario.email}
							</td>
						</tr>
						
						<tr>
							<td class="text-right">
								<b>Plataforma:</b>
							</td>
							<td>
								${evaluacion.dato.plataforma}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Url/Versión:</b>
							</td>
							<td>
								${evaluacion.dato.url}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Objetivo:</b>
							</td>
							<td>
								${evaluacion.contexto.objetivos}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Pantallas:</b>
							</td>
							<td>
								${evaluacion.contexto.pantallas}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Tareas:</b>
							</td>
							<td>
								${evaluacion.contexto.tareas}
							</td>
						</tr>
						
						
					</table>
				</div>
			
		
		
		</div>
	
	
	</div>

</div>
#{list items:parametros, as:'parametro'}
	<div class="row">
		<div class="box">
			
			<div class="col-lg-3" >
			</div>
			<div class="col-lg-6" >
					<center><h3>Resultados en ${parametro.nombre}</h3></center>
						<div class="table-responsive">
								<table class="table table-striped table-hover table-bordered" id="${parametro.id}">
								<tr>
									<th>
										<CENTER>N°</CENTER>
									</th>
									<th>
										<CENTER>PREGUNTA</CENTER>
									</th>
									<th> 
										PTOS
									</th>
								</tr>
									%{int cal=0,num=1; }%
									
									#{list items:resumen, as: 'r'}	
									#{if parametro == r.item.parametro}
									<tr>
										<td class="text-center">
											<b>${num}</b>
										</td>
										
										<td>
											${r.item.pregunta}
										</td>
										<td>
											${r.calificacion}
											%{cal+=r.calificacion; num++;}%
										</td>
									</tr>
									#{/if}
								#{/list}
									<tr>
										
										
										<!-- Rojos -->
										#{if cal<=20}
											<td class="text-right malo" colspan="2"><b>TOTAL:</b></td>
											<td class="text-center malo" >
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										<!-- Naranjas -->
										#{if (cal>=21 && cal<=35)}
											<td class="text-right bueno" colspan="2"><b>TOTAL:</b></td>
											<td class="text-center bueno">
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										<!-- Verdes -->
										#{if (cal>=36)}
											<td class="text-right muybueno" colspan="2"><b>TOTAL:</b></td>
											<td class="text-center muybueno">
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										
									</tr>
									
																
								</table>
						</div>
						
				
			</div>
		</div>
	</div>
#{/list}




<div class="box">
<h2 class="text-center">GRÁFICA DE BARRAS DE LOS RESULTADOS</h2>
<br><br>

<canvas id="chart-area3" width="600px" height="200px"></canvas>
</div>
<br><br>
<div class="box">
<h2 class="text-center">CURVA DE LOS RESULTADOS</h2>
<br><br>
<canvas id="chart-area4" width="600px" height="200px"></canvas>
</div>

<script >
	var barChartData = {
		labels : [
				#{list items:parametros, as:'parametro'}
		          	"${parametro.nombre}",
		         #{/list}
		          ],
		datasets : [
			{
				fillColor : "#6368E8",
				strokeColor : "black",//bordes
				highlightFill: "#1864f2",//hover
				highlightStroke: "#ffffff",
				data : [
						#{list items:parametros, as:'parametro'}
							%{int cal=0;}%
							#{list items:resumen, as: 'r'}	
								#{if parametro == r.item.parametro}
									%{cal+=r.calificacion;}%
								#{/if}
							#{/list}	
								${cal},
						#{/list}
				       ]
			}
		]

	}	

	var linealChartData = {
			labels : [
					#{list items:parametros, as:'parametro'}
			          	"${parametro.nombre}",
			         #{/list}
			          ],
			datasets : [
				{
					fillColor : "#E86A41",
					strokeColor : "black",//bordes
					highlightFill: "#1864f2",//hover
					highlightStroke: "#ffffff",
					data : [
							#{list items:parametros, as:'parametro'}
								%{int cal=0;}%
								#{list items:resumen, as: 'r'}	
									#{if parametro == r.item.parametro}
										%{cal+=r.calificacion;}%
									#{/if}
								#{/list}	
									${cal},
							#{/list}
					       ]
				}
			]

		}	
	
var ctx3 = document.getElementById("chart-area3").getContext("2d");
var ctx4 = document.getElementById("chart-area4").getContext("2d");			
window.myPie = new Chart(ctx3).Bar(barChartData, {responsive:true,});

window.myPie = new Chart(ctx4).Line(linealChartData, {responsive:true});

</script>
<br><br>

<div class="box text-center impresion">
<input type="button" class="btn btn-primary imprimir text-center" value="IMPRIMIR">
</div>

</div>
</div>
#{extends 'main.html' /}



<div class="container">


		<div class="row">
		<div class="box">
		
			<div class="col-lg-12 text-center" >
			
				<h1>Reporte de la Evaluación</h1>
				<p class="text-justify">A continuación se muestra los resultados obtenidos en la Evaluacíon
				Heurística realizada a <b>${evaluacion.dato.nombreSitio}</b>, para mayor facilidad se emplean los siguientes colores
				para reflejar el resultado alcanzado en cada uno de los parámetros evaluados:</p>
				<div class="row">
					<div class="col-lg-4 text-center" >
					<div style="background-color: #5DFF7B;">Muy Bueno</div>
					</div>
				
				<div class="col-lg-4 text-center" >
					<div style="background-color: #E8CE46;">Bueno</div>
				</div>
				
				<div class="col-lg-4 text-center" >
					<div style="background-color: #FF4732;"> Malo</div>
				</div>
				
				
			
			</div>

		
	</div>
	
	
	</div>
	<div class="row">
		<div class="box">
			
			<div class="col-lg-3" >
			</div>
			<div class="col-lg-6" >
				<center><h3>DATOS DEL ANÁLISIS</h3></center>
				<div class="table-responsive">
					<table class="table table-striped table-hover table-bordered">
						<tr>
							<td class="text-right">
								<b>Nombre del Sitio:</b>
							</td>
							<td>
								<b><h5>${evaluacion.dato.nombreSitio}</h5></b>
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Fecha de Evaluación:</b>
							</td>
							<td>
								${evaluacion.fecha}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Nombre del Evaluador:</b>
							</td>
							<td>
								${evaluacion.usuario.nombre} ${evaluacion.usuario.apellido}
							</td>
						</tr>
						
						<tr>
							<td class="text-right">
								<b>Correo del Evaluador:</b>
							</td>
							<td>
								${evaluacion.usuario.email}
							</td>
						</tr>
						
						<tr>
							<td class="text-right">
								<b>Plataforma:</b>
							</td>
							<td>
								${evaluacion.dato.plataforma}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Url/Versión:</b>
							</td>
							<td>
								${evaluacion.dato.url}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Objetivo:</b>
							</td>
							<td>
								${evaluacion.contexto.objetivos}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Pantallas:</b>
							</td>
							<td>
								${evaluacion.contexto.pantallas}
							</td>
						</tr>
						<tr>
							<td class="text-right">
								<b>Tareas:</b>
							</td>
							<td>
								${evaluacion.contexto.tareas}
							</td>
						</tr>
						
						
					</table>
				</div>
			
		
		
		</div>
	
	
	</div>

</div>

#{list items:parametros, as:'parametro'}
	<div class="row">
		<div class="box">
			
			<div class="col-lg-3" >
			</div>
			<div class="col-lg-6" >
					<center><h3>Resultados en ${parametro.nombre}</h3></center>
				
				
					
						<div class="table-responsive">
								<table class="table table-striped table-hover table-bordered">
								<tr>
									<th>
										<CENTER>N°</CENTER>
									</th>
									<th>
										<CENTER>PREGUNTA</CENTER>
									</th>
									<th> 
										PTOS
									</th>
								</tr>
									%{int cal=0,num=1; }%
									
									#{list items:resumen, as: 'r'}	
									#{if parametro == r.item.parametro}
									<tr>
										<td class="text-center">
											<b>${num}</b>
										</td>
										
										<td>
											${r.item.pregunta}
										</td>
										<td>
											${r.calificacion}
											%{cal+=r.calificacion; num++;}%
										</td>
									</tr>
									#{/if}
								#{/list}
									<tr>
										
										
										<!-- Rojos -->
										#{if cal<=20}
											<td class="text-right" style="background-color: #FF4732; " colspan="2"><b>TOTAL:</b></td>
											<td class="text-center" style="background-color: #FF4732;">
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										<!-- Naranjas -->
										#{if (cal>=21 && cal<=35)}
											<td class="text-right" style="background-color: #E8CE46;" colspan="2"><b>TOTAL:</b></td>
											<td class="text-center" style="background-color: #E8CE46;">
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										<!-- Verdes -->
										#{if (cal>=36)}
											<td class="text-right" style="background-color: #5DFF7B;" colspan="2"><b>TOTAL:</b></td>
											<td class="text-center" style="background-color: #5DFF7B;">
												<b>${cal}/50</b>
											</td>
										#{/if}
										
										
									</tr>
								
								</table>
						</div>
						
				
			</div>
		</div>
	</div>
#{/list}




<div class="box">
<h2 class="text-center">GRÁFICA DE BARRAS DE LOS RESULTADOS</h2>
<br><br>

<canvas id="chart-area3" width="600px" height="200px"></canvas>
</div>

<div class="box">
<h2 class="text-center">CURVA DE LOS RESULTADOS</h2>
<br><br>
<canvas id="chart-area4" width="600px" height="200px"></canvas>
</div>

<script >
	var barChartData = {
		labels : [
				#{list items:parametros, as:'parametro'}
		          	"${parametro.nombre}",
		         #{/list}
		          ],
		datasets : [
			{
				fillColor : "#6368E8",
				strokeColor : "black",//bordes
				highlightFill: "#1864f2",//hover
				highlightStroke: "#ffffff",
				data : [
						#{list items:parametros, as:'parametro'}
							%{int cal=0;}%
							#{list items:resumen, as: 'r'}	
								#{if parametro == r.item.parametro}
									%{cal+=r.calificacion;}%
								#{/if}
							#{/list}	
								${cal},
						#{/list}
				       ]
			}
		]

	}	

	var linealChartData = {
			labels : [
					#{list items:parametros, as:'parametro'}
			          	"${parametro.nombre}",
			         #{/list}
			          ],
			datasets : [
				{
					fillColor : "#E86A41",
					strokeColor : "black",//bordes
					highlightFill: "#1864f2",//hover
					highlightStroke: "#ffffff",
					data : [
							#{list items:parametros, as:'parametro'}
								%{int cal=0;}%
								#{list items:resumen, as: 'r'}	
									#{if parametro == r.item.parametro}
										%{cal+=r.calificacion;}%
									#{/if}
								#{/list}	
									${cal},
							#{/list}
					       ]
				}
			]

		}	
	
var ctx3 = document.getElementById("chart-area3").getContext("2d");
var ctx4 = document.getElementById("chart-area4").getContext("2d");			
window.myPie = new Chart(ctx3).Bar(barChartData, {responsive:true,});

window.myPie = new Chart(ctx4).Line(linealChartData, {responsive:true});

</script>

</div>
</div>